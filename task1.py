# –°—Ç–≤–æ—Ä—ñ—Ç—å –≥—Ä–∞—Ñ –∑–∞ –¥–æ–ø–æ–º–æ–≥–æ—é –±—ñ–±–ª—ñ–æ—Ç–µ–∫–∏ networkX –¥–ª—è –º–æ–¥–µ–ª—é–≤–∞–Ω–Ω—è –ø–µ–≤–Ω–æ—ó —Ä–µ–∞–ª—å–Ω–æ—ó –º–µ—Ä–µ–∂—ñ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ—ó –º–µ—Ä–µ–∂—ñ –º—ñ—Å—Ç–∞, —Å–æ—Ü—ñ–∞–ª—å–Ω–æ—ó –º–µ—Ä–µ–∂—ñ, —ñ–Ω—Ç–µ—Ä–Ω–µ—Ç-—Ç–æ–ø–æ–ª–æ–≥—ñ—ó).
# info
# üìñ –†–µ–∞–ª—å–Ω—É –º–µ—Ä–µ–∂—É –º–æ–∂–Ω–∞ –≤–∏–±—Ä–∞—Ç–∏ –Ω–∞ —Å–≤—ñ–π —Ä–æ–∑—Å—É–¥, —è–∫—â–æ –Ω–µ–º–∞—î –º–æ–∂–ª–∏–≤–æ—Å—Ç—ñ –ø—Ä–∏–¥—É–º–∞—Ç–∏ —Å–≤–æ—é –º–µ—Ä–µ–∂—É, –Ω–∞–±–ª–∏–∂–µ–Ω—É –¥–æ —Ä–µ–∞–ª—å–Ω–æ—Å—Ç—ñ.
# –í—ñ–∑—É–∞–ª—ñ–∑—É–π—Ç–µ —Å—Ç–≤–æ—Ä–µ–Ω–∏–π –≥—Ä–∞—Ñ, –ø—Ä–æ–≤–µ–¥—ñ—Ç—å –∞–Ω–∞–ª—ñ–∑ –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫ (–Ω–∞–ø—Ä–∏–∫–ª–∞–¥, –∫—ñ–ª—å–∫—ñ—Å—Ç—å –≤–µ—Ä—à–∏–Ω —Ç–∞ —Ä–µ–±–µ—Ä, —Å—Ç—É–ø—ñ–Ω—å –≤–µ—Ä—à–∏–Ω).
# –°—Ç–≤–æ—Ä–µ–Ω–Ω—è –≥—Ä–∞—Ñ—É —Ç—Ä–∞–Ω—Å–ø–æ—Ä—Ç–Ω–æ—ó –º–µ—Ä–µ–∂—ñ –º—ñ—Å—Ç–∞ –ö–∏—î–≤–∞ (—Å—Ç–∞–Ω—Ü—ñ—ó –º–µ—Ç—Ä–æ)


import networkx as nx
import matplotlib.pyplot as plt

G = nx.Graph()

# –î–æ–¥–∞–≤–∞–Ω–Ω—è —Å—Ç–∞–Ω—Ü—ñ–π (–≤–µ—Ä—à–∏–Ω) –ø–æ –ª—ñ–Ω—ñ—è—Ö
red_line = ['–ê–∫–∞–¥–µ–º–º—ñ—Å—Ç–µ—á–∫–æ', '–ñ–∏—Ç–æ–º–∏—Ä—Å—å–∫–∞', '–°–≤—è—Ç–æ—à–∏–Ω', '–ù–∏–≤–∫–∏', '–ë–µ—Ä–µ—Å—Ç–µ–π—Å—å–∫–∞', 
           '–®—É–ª—è–≤—Å—å–∫–∞', '–ü–æ–ª—ñ—Ç–µ—Ö–Ω—ñ—á–Ω–∞', '–í–æ–∫–∑–∞–ª—å–Ω–∞', '–£–Ω—ñ–≤–µ—Ä—Å–∏—Ç–µ—Ç', '–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞',
           '–•—Ä–µ—â–∞—Ç–∏–∫', '–ê—Ä—Å–µ–Ω–∞–ª—å–Ω–∞', '–î–Ω—ñ–ø—Ä–æ', '–ì—ñ–¥—Ä–æ–ø–∞—Ä–∫', '–õ—ñ–≤–æ–±–µ—Ä–µ–∂–Ω–∞', '–î–∞—Ä–Ω–∏—Ü—è']

blue_line = ['–ì–µ—Ä–æ—ó–≤ –î–Ω—ñ–ø—Ä–∞', '–ú—ñ–Ω—Å—å–∫–∞', '–û–±–æ–ª–æ–Ω—å', '–ü–æ—á–∞–π–Ω–∞', '–¢–∞—Ä–∞—Å–∞ –®–µ–≤—á–µ–Ω–∫–∞',
            '–ö–æ–Ω—Ç—Ä–∞–∫—Ç–æ–≤–∞ –ø–ª–æ—â–∞', '–ü–æ—à—Ç–æ–≤–∞ –ø–ª–æ—â–∞', '–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ', '–ü–ª–æ—â–∞ –õ—å–≤–∞ –¢–æ–ª—Å—Ç–æ–≥–æ',
            '–û–ª—ñ–º–ø—ñ–π—Å—å–∫–∞', '–ü–∞–ª–∞—Ü –£–∫—Ä–∞—ó–Ω–∞', '–õ–∏–±—ñ–¥—Å—å–∫–∞', '–î–µ–º—ñ—ó–≤—Å—å–∫–∞', '–ì–æ–ª–æ—Å—ñ—ó–≤—Å—å–∫–∞', '–í–∞—Å–∏–ª—å–∫—ñ–≤—Å—å–∫–∞']

green_line = ['–°–∏—Ä–µ—Ü—å', '–î–æ—Ä–æ–≥–æ–∂–∏—á—ñ', '–õ—É–∫\'—è–Ω—ñ–≤—Å—å–∫–∞', '–ó–æ–ª–æ—Ç—ñ –≤–æ—Ä–æ—Ç–∞', '–ü–∞–ª–∞—Ü —Å–ø–æ—Ä—Ç—É',
             '–ö–ª–æ–≤—Å—å–∫–∞', '–ü–µ—á–µ—Ä—Å—å–∫–∞', '–î—Ä—É–∂–±–∏ –Ω–∞—Ä–æ–¥—ñ–≤', '–í–∏–¥—É–±–∏—á—ñ', '–°–ª–∞–≤—É—Ç–∏—á', '–û—Å–æ–∫–æ—Ä–∫–∏',
             '–ü–æ–∑–Ω—è–∫–∏', '–•–∞—Ä–∫—ñ–≤—Å—å–∫–∞', '–í–∏—Ä–ª–∏—Ü—è', '–ë–æ—Ä–∏—Å–ø—ñ–ª—å—Å—å–∫–∞', '–ß–µ—Ä–≤–æ–Ω–∏–π —Ö—É—Ç—ñ—Ä']

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –≤—Å—ñ—Ö —Å—Ç–∞–Ω—Ü—ñ–π
G.add_nodes_from(red_line)
G.add_nodes_from(blue_line)
G.add_nodes_from(green_line)

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω—å –º—ñ–∂ —Å—Ç–∞–Ω—Ü—ñ—è–º–∏ –Ω–∞ —á–µ—Ä–≤–æ–Ω—ñ–π –ª—ñ–Ω—ñ—ó
for i in range(len(red_line)-1):
    G.add_edge(red_line[i], red_line[i+1])

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω—å –º—ñ–∂ —Å—Ç–∞–Ω—Ü—ñ—è–º–∏ –Ω–∞ —Å–∏–Ω—ñ–π –ª—ñ–Ω—ñ—ó
for i in range(len(blue_line)-1):
    G.add_edge(blue_line[i], blue_line[i+1])

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –∑'—î–¥–Ω–∞–Ω—å –º—ñ–∂ —Å—Ç–∞–Ω—Ü—ñ—è–º–∏ –Ω–∞ –∑–µ–ª–µ–Ω—ñ–π –ª—ñ–Ω—ñ—ó
for i in range(len(green_line)-1):
    G.add_edge(green_line[i], green_line[i+1])

# –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø–µ—Ä–µ—Å–∞–¥–æ–∫ –º—ñ–∂ –ª—ñ–Ω—ñ—è–º–∏
transfers = [
    ('–¢–µ–∞—Ç—Ä–∞–ª—å–Ω–∞', '–ó–æ–ª–æ—Ç—ñ –≤–æ—Ä–æ—Ç–∞'),
    ('–•—Ä–µ—â–∞—Ç–∏–∫', '–ú–∞–π–¥–∞–Ω –ù–µ–∑–∞–ª–µ–∂–Ω–æ—Å—Ç—ñ'),
    ('–ü–ª–æ—â–∞ –õ—å–≤–∞ –¢–æ–ª—Å—Ç–æ–≥–æ', '–ü–∞–ª–∞—Ü —Å–ø–æ—Ä—Ç—É')
]
G.add_edges_from(transfers)


if __name__ == "__main__":
    # –ê–Ω–∞–ª—ñ–∑ –æ—Å–Ω–æ–≤–Ω–∏—Ö —Ö–∞—Ä–∞–∫—Ç–µ—Ä–∏—Å—Ç–∏–∫
    print(f"–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å —Å—Ç–∞–Ω—Ü—ñ–π: {G.number_of_nodes()}")
    print(f"–ó–∞–≥–∞–ª—å–Ω–∞ –∫—ñ–ª—å–∫—ñ—Å—Ç—å –∑'—î–¥–Ω–∞–Ω—å: {G.number_of_edges()}")
    print("\n–°—Ç–∞–Ω—Ü—ñ—ó –∑ –ø–µ—Ä–µ—Å–∞–¥–∫–∞–º–∏ (—Å—Ç—É–ø—ñ–Ω—å > 2):")
    for station in G.nodes():
      degree = G.degree(station)
      if degree > 2:
          print(f"{station}: {degree} –∑'—î–¥–Ω–∞–Ω–Ω—è")

    # –í—ñ–∑—É–∞–ª—ñ–∑–∞—Ü—ñ—è –≥—Ä–∞—Ñ—É
    plt.figure(figsize=(15, 10))
    pos = nx.spring_layout(G, k=1, iterations=50)

    # –ú–∞–ª—é–≤–∞–Ω–Ω—è —Ä–µ–±–µ—Ä
    nx.draw_networkx_edges(G, pos)

    # –ú–∞–ª—é–≤–∞–Ω–Ω—è –≤–µ—Ä—à–∏–Ω –∑ —Ä—ñ–∑–Ω–∏–º–∏ –∫–æ–ª—å–æ—Ä–∞–º–∏ –¥–ª—è —Ä—ñ–∑–Ω–∏—Ö –ª—ñ–Ω—ñ–π
    nx.draw_networkx_nodes(G, pos, nodelist=red_line, node_color='red', node_size=700)
    nx.draw_networkx_nodes(G, pos, nodelist=blue_line, node_color='blue', node_size=700)
    nx.draw_networkx_nodes(G, pos, nodelist=green_line, node_color='green', node_size=700)

    # –î–æ–¥–∞–≤–∞–Ω–Ω—è –ø—ñ–¥–ø–∏—Å—ñ–≤ —Å—Ç–∞–Ω—Ü—ñ–π
    nx.draw_networkx_labels(G, pos, font_size=8)

    plt.title("–°—Ö–µ–º–∞ –º–µ—Ç—Ä–æ –ö–∏—î–≤–∞")
    plt.axis('off')
    plt.show()
